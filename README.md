# acme.sh-cloudflare-dns
Acme.sh renewal script on my proxmox cluster with cloudflare API DNS

I had acme installed on my proxmox host (I have a cluster of 2 machines)
my domain is hosted at cloudflare. I created an token and got the ID for my account

Acme is installed in /root/.acme.sh/
also the acme.sh script is in /root/acme.sh (no typwriting error)
This script is in this folder

What does this script

start the ./renewscript.sh checking the certificate in /root/.acme.sh/domain.ltd.net_ecc
during test I used a --force to keep renewing the certificate to find mistakes in this script

as my system used a *.domain.ltd.net I had to rename the certificates and copy it in /export/certificate.
/export/certificate is configured in lxc as mp0 so that it is a 'virtual folder' making it possible
that a LXC can get the certficate from the host

the rename to *.domain.ltd.net is not wanted by acme.sh when renewing so after the copy I had to revert that
so that a new certificate can be made. the next time.

As I have a 2nd machine an rsync session is set up to copy the data to the next machine.

btw a lot of this script was generated by chatgpt ;_) I only added some vanilla to change it to my needs and to instruct chatgpt to
change certain parts as it did not do what I wanted. Ie. I was unable to use a simple rename but had to use SED where in a
2nd script I had to use to fix mistakes in a folder where it was no issue to use the first generated proposal.
